var e,t,o=Object.getOwnPropertyNames,n=(e={"assets/index-BThqowEE.js"(e){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const t=localStorage.getItem("dating_auth_token");t&&(window.location.href=`https://www.dating.com/people/#token=${t}`);const o=document.querySelector(".modal"),n=document.querySelectorAll(".js-modal-trigger"),r=document.querySelectorAll(".js-modal-close");n.forEach((e=>{e.addEventListener("click",(()=>{null==o||o.classList.add("is-active"),document.body.style.overflow="hidden"}))}));const l=()=>{null==o||o.classList.remove("is-active"),document.body.style.overflow="",null==s||s.reset(),v()};r.forEach((e=>{e.addEventListener("click",l)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&(null==o?void 0:o.classList.contains("is-active"))&&l()}));const s=document.querySelector(".form"),a=document.querySelector("#email"),i=document.querySelector("#password"),c=document.querySelector("#email-error"),d=document.querySelector("#password-error"),u=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),m=e=>e.length>=8,h=(e,t,o)=>{var n;null==(n=e.parentElement)||n.classList.add("has-error"),t.textContent=o},p=(e,t)=>{var o;null==(o=e.parentElement)||o.classList.remove("has-error"),t.textContent=""},v=()=>{p(a,c),p(i,d)},w=(e,t,o,n)=>e.value&&!t(e.value)?(h(e,o,n),!1):(p(e,o),!0);a.addEventListener("focus",(()=>{p(a,c)})),i.addEventListener("focus",(()=>{p(i,d)})),a.addEventListener("blur",(()=>{a.value&&w(a,u,c,"Please enter a valid email address")})),i.addEventListener("blur",(()=>{i.value&&w(i,m,d,"Password must be at least 8 characters long")})),null==s||s.addEventListener("submit",(t=>{return n=e,r=null,s=function*(){t.preventDefault();let e=!0;if(a.value?u(a.value)||(h(a,c,"Please enter a valid email address"),e=!1):(h(a,c,"Email is required"),e=!1),i.value?m(i.value)||(h(i,d,"Password must be at least 8 characters long"),e=!1):(h(i,d,"Password is required"),e=!1),e)try{const e=btoa(`${a.value}:${i.value}`),t=yield fetch("https://api.dating.com/identity",{method:"GET",headers:{Authorization:`Basic ${e}`}});if(t.ok){const e=t.headers.get("X-Token");if(!e)throw new Error("Token not received");localStorage.setItem("dating_auth_token",e);const n=null==o?void 0:o.querySelector(".modal__content");if(n){n.innerHTML='\n            <button class="modal__close js-modal-close" aria-label="Close modal">\n              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                <path d="M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n              </svg>\n            </button>\n            <h2 class="modal__title modal__title--success">Thank You</h2>\n            <p class="modal__text">To complete registration, please check your e-mail</p>\n          ';const t=n.querySelector(".js-modal-close");null==t||t.addEventListener("click",l),setTimeout((()=>{window.location.href=`https://www.dating.com/people/#token=${e}`}),1500)}}else{const e=yield fetch("https://api.dating.com/identity",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.value,password:i.value})});if(!e.ok)throw new Error("Authentication failed");const t=e.headers.get("X-Token");if(!t)throw new Error("Token not received");localStorage.setItem("dating_auth_token",t);const n=null==o?void 0:o.querySelector(".modal__content");if(n){n.innerHTML='\n            <button class="modal__close js-modal-close" aria-label="Close modal">\n              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                <path d="M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n              </svg>\n            </button>\n            <h2 class="modal__title modal__title--success">Thank You</h2>\n            <p class="modal__text">To complete registration, please check your e-mail</p>\n          ';const e=n.querySelector(".js-modal-close");null==e||e.addEventListener("click",l),setTimeout((()=>{window.location.href=`https://www.dating.com/people/#token=${t}`}),1500)}}}catch(n){h(a,c,"Authentication failed. Please try again.")}},new Promise(((e,t)=>{var o=e=>{try{a(s.next(e))}catch(o){t(o)}},l=e=>{try{a(s.throw(e))}catch(o){t(o)}},a=t=>t.done?e(t.value):Promise.resolve(t.value).then(o,l);a((s=s.apply(n,r)).next())}));var n,r,s}))}},function(){return t||(0,e[o(e)[0]])((t={exports:{}}).exports,t),t.exports});export default n();
